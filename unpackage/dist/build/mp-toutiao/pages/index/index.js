(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1762:function(e,n,t){"use strict";t.r(n);var o=t("4e24"),i=t("af8f");for(var u in i)"default"!==u&&function(e){t.d(n,e,(function(){return i[e]}))}(u);t("48bb");var a,s=t("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"e0ff4d96",null,!1,o["a"],a);n["default"]=c.exports},"3d6b":function(e,n,t){},"48bb":function(e,n,t){"use strict";var o=t("3d6b"),i=t.n(o);i.a},"4e24":function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return o}));var o={uPopup:function(){return t.e("uview-ui/components/u-popup/u-popup").then(t.bind(null,"c2b3"))},treeSelect:function(){return t.e("components/tree-select/tree-select").then(t.bind(null,"19f1"))},uCellGroup:function(){return t.e("uview-ui/components/u-cell-group/u-cell-group").then(t.bind(null,"5042"))},uCellItem:function(){return t.e("uview-ui/components/u-cell-item/u-cell-item").then(t.bind(null,"d574"))},uBadge:function(){return t.e("uview-ui/components/u-badge/u-badge").then(t.bind(null,"db80"))}},i=function(){var e=this,n=e.$createElement;e._self._c},u=[]},"516c":function(e,n,t){"use strict";(function(e){t("67a1");o(t("66fd"));var n=o(t("1762"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("f266")["createPage"])},"7c85":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;getApp();var o=t("2ae2"),i={data:function(){return{offsetTop:0,isType:!0,isThreeType:2,isSelectSubject:!1,switchShow:!1,userInfoData:"",mainActiveIndex:0,activeId:null,items:[],fileList:[],phoneModuleShow:!1,newproject:null,user_phone:"",wechat_id:"",myPersonalPopup:!1}},components:{},props:{},onLoad:function(){},onShow:function(){this.getStorages()},methods:{myPersonal:function(){this.myPersonalPopup=!0},myUser:function(){e.navigateTo({url:"../my/my"})},install:function(){e.navigateTo({url:"../my/install"})},message:function(){e.navigateTo({url:"../my/message"})},getStorages:function(){var n=this;e.getStorage({key:"userInfoData",success:function(t){console.log("触发strong"),n.userInfoData=t.data,n.isThreeType=0,n.wechat_id=t.data.id,console.log(n.userInfoData,"storage"),e.getStorage({key:"newproject",success:function(e){console.log({res:e}),n.newproject=e.data,n.isSelectSubject=!0,n.activeId=Number(e.data.fuData.children.id),n.mainActiveIndex=e.data.fuData.index}})}})},examineLogin:function(){var n=this.userInfoData;console.log(n),console.log(n.user_nickname),""==n.user_nickname||"undefined"==typeof n.user_nickname?(e.showToast({title:"请进行登录",icon:"none",duration:1e3}),this.isType=!1):""==n.user_phone||"undefined"==typeof n.user_phone?(this.isType=!1,this.phoneModuleShow=!0):this.isType=!0},switchCourse:function(){this.$nextTick((function(){this.getStorages()})),this.examineLogin();var e=this.isType;console.log(e),e&&(this.getParentAjax(),this.switchShow=!0)},onClose:function(){this.switchShow=!1},onClickNav:function(e){console.log("一级菜单",e.detail),this.mainActiveIndex=e.detail.index||0},onClickItem:function(n){console.log("二级菜单",n.detail);this.activeId===n.detail.id||Number(n.detail.id);for(var t=this.items,o={},i=0;i<t.length;i++){var u=t[i];if(n.detail.p_id==u.id){console.log(u),o["fuData"]=u;var a=o["fuData"];a["children"]=n.detail,a["index"]=i,this.newproject=o,this.isSelectSubject=!0,this.switchShow=!1,e.setStorage({key:"newproject",data:o})}}},goToQuestion:function(){console.log(this.newproject),this.examineLogin();var n=this.isType;console.log(n),n&&(null!=this.newproject?e.navigateTo({url:"/pages/questionAnswer/questionAnswer"}):e.showToast({title:"请选择项目",icon:"none",duration:1e3}))},getPhoneNumber:function(e){var n=this,t={encryptedData:e.detail.encryptedData,iv:e.detail.iv,wechat_id:this.wechat_id},i={encryptedData:e.detail.encryptedData,iv:e.detail.iv,wechat_id:this.wechat_id};o.number(t,i).then((function(e){100==e.event&&(n.user_phone=e.data,n.phoneModuleShow=!1,n.judgeUserInfo())}))},goToHuodong:function(){console.log(this.userInfoData.mobile),""!=this.userInfoData.mobile?e.navigateTo({url:"/pages/huoDong/huoDong?phone="+this.userInfoData.mobile}):e.showToast({title:"请登录",icon:"none",duration:1e3})},phoneModuleOff:function(){this.phoneModuleShow=!1},judgeUserInfo:function(){var n=this;e.login({success:function(t){var i=t.code;e.getUserInfo({success:function(t){console.log(t,"获取用户信息");var u=t.userInfo,a={"info[type]":"zijie","info[xcx]":"zkb","info[code]":i};o.login(a,a).then((function(t){if(console.log({res:t},"用户信息"),100==t.event){console.log("dengluchengong"),e.showToast({title:"登录成功",icon:"none",duration:1e3});var o=t.data.userInfo;o.user_phone="15136298700",o.user_nickname=u.nickName,o.user_pic=u.avatarUrl,o.user_gender=u.gender,o.country=u.country,o.city=u.city,o.province=u.province,n.userInfoData=o,n.wechat_id=o.user_id,n.isThreeType=0,e.setStorage({key:"userInfoData",data:o,success:function(){console.log("success")},fail:function(){console.log("fail")}}),n.reserveUserInfo(o),""==o.user_phone&&(n.phoneModuleShow=!0)}}))}})}})},reserveUserInfo:function(e){console.log(e,"存储信息");var n={"info[user_id]":e.user_id,"info[user_nickname]":e.user_nickname,"info[user_pic]":e.user_pic,"info[user_gender]":e.user_gender,"info[city]":e.city,"info[province]":e.province,"info[country]":e.country},t=n;o.xcx_userxx(n,t).then((function(e){console.log("xcx_userxx",e)}))},getParentAjax:function(){var e=this,n={},t={};o.parentAjax(n,t).then((function(n){100==n.event&&e.manageParent(n.data)}))},manageParent:function(e){var n=e.map((function(e){var n=e.cities,t=n.map((function(e){return{id:e.id,text:e.lb,p_id:e.p_id}}));return{id:e.id,text:e.lb,p_id:e.p_id,children:t}}));this.items=n},goToHistory:function(){this.examineLogin();var n=this.isType;console.log(n),n&&e.navigateTo({url:"/pages/answerRecord/answerRecord"})}}};n.default=i}).call(this,t("f266")["default"])},af8f:function(e,n,t){"use strict";t.r(n);var o=t("7c85"),i=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);n["default"]=i.a}},[["516c","common/runtime","common/vendor"]]]);